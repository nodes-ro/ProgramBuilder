<!doctype html>
<html data-theme="light" lang="en">
<head>
    <meta charset="utf-8"/>
    <title>Event Program Generator</title>
    <link href="https://cdn.jsdelivr.net/npm/@picocss/pico@1/css/pico.min.css" rel="stylesheet"/>


</head>
<body class="container">


<main>
    <h1>Event Program Generator</h1>

    {%- with msgs = get_flashed_messages(with_categories=true) %}
        {%- if msgs %}
            {%- for cat, msg in msgs %}
        <article class="alert {{ cat }}">{{ msg }}</article>
            {%- endfor %}
        {%- endif %}
    {%- endwith %}

    <!-- Split view: 1/3 wizard · 2/3 schedule -->
    <div class="grid" style="grid-template-columns: 1fr 2fr; gap: var(--pico-spacing);">

        <!-- ────────── 1. WIZARD (left‑third) ────────── -->
        <aside>

            <!-- Accordion 1: New Program -->
            <details open>
                <summary><h4>Create New Program</h4></summary>
                <form method="post">
                    <input type="hidden" name="form_type" value="new_program">

                    <label>Program name
                        <input name="program_name" placeholder="e.g. 2025 Tech Festival" required type="text"/>
                    </label>


                    <button class="secondary" type="submit">Create Program</button>
                </form>
            </details>

            <!-- Accordion 2: Add Event to Program -->
            <details>
                <summary><h4>Add Events to Program</h4></summary>
                <form enctype="multipart/form-data" method="post">
                    <input type="hidden" name="form_type" value="new_event">

                    <label>Select Program
                        <select name="program_id" required>
                            {% for program in programs %}
                            <option value="{{ program.id }}">{{ program.name }}</option>
                            {% endfor %}
                        </select>
                    </label>

                    <label>Day
                        <select name="day" required>
                            {% for d in days %}
                            <option value="{{ d }}">{{ d }}</option>
                            {% endfor %}
                        </select>
                    </label>

                    <div class="grid" style="grid-template-columns: 1fr 1fr; gap: var(--pico-spacing);">
                        <label>Day starts
                            <input name="day_start" required type="time"/>
                        </label>

                        <label>Day ends
                            <input name="day_ends" required type="time"/>
                        </label>
                    </div>

                    <label>Event title
                        <input name="title" placeholder="Event title" required type="text"/>
                    </label>

                    <label>Event description
                        <textarea maxlength="240" name="detail" placeholder="What happens? (max 240 chars)" required rows="2"></textarea>
                    </label>

                    <label>Event picture (optional)
                        <input accept="image/*" name="picture" type="file"/>
                    </label>

                    <label>Event starts at
                        <input name="event_start" required type="time"/>
                    </label>

                    <label>Event ends at
                        <input name="event_ends" required type="time"/>
                    </label>

                    <label>Stage (optional)
                        <input name="stage" placeholder="Stage name (e.g. Main, Workshop)" type="text"/>
                    </label>

                    <button class="secondary" type="submit">Add Event</button>
                </form>
            </details>

        </aside>

        <!-- ────────── 2. SCHEDULE (right‑two‑thirds) ────────── -->
        <section style="display:flex;flex-direction:column;align-items:center;">
            {% include "program_template.html" %}
        </section>
    </div>
</main>
</body>
</html>
