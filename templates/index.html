<!doctype html>
<html data-theme="light" lang="en">
<head>
    <meta charset="utf-8"/>
    <title>Event Program Generator</title>
    <link href="https://cdn.jsdelivr.net/npm/@picocss/pico@1/css/pico.min.css" rel="stylesheet"/>

</head>
<body class="container">
<main>
    <h1>Event Program Generator</h1>

    {%- with msgs = get_flashed_messages(with_categories=true) %}
    {%- if msgs %}
    {%- for cat, msg in msgs %}
    <article class="alert {{ cat }}">{{ msg }}</article>
    {%- endfor %}
    {%- endif %}
    {%- endwith %}

    <!-- Split view: 1/3 wizard · 2/3 schedule -->
    <div class="grid" style="grid-template-columns: 1fr 2fr; gap: var(--pico-spacing);">

        <!-- ────────── 1. WIZARD (left‑third) ────────── -->
        <aside>
            <!-- Accordion 1: New Event -->
            <details open>
                <summary><h3>New Event</h3></summary>
                <form enctype="multipart/form-data" method="post">
                    <!-- Day selector -->
                    <label>Day
                        <select name="day" required>
                            {% for d in days %}
                            <option value="{{ d }}">{{ d }}</option>
                            {% endfor %}
                        </select>
                    </label>

                    <div class="grid" style="grid-template-columns: 1fr 1fr; gap: var(--pico-spacing);">

                        <!-- Start & duration of the whole event -->
                        <label>Day starts&nbsp;
                            <input name="day_start" required type="time"/>
                        </label>

                        <label>Day ends&nbsp;
                            <input name="day_ends" required type="time"/>
                        </label>

                    </div>
                    <hr/>

                    <label>Event details
                        <input name="title" placeholder="Event title" required type="text"/>
                    </label>

                    <!-- Description & optional picture -->
                    <textarea maxlength="240" name="detail" placeholder="Event description. What happens? (max 240 chars)"
                              required rows="2"></textarea>

                    <label>Event picture&nbsp;(optional)
                        <input accept="image/*" name="picture" type="file"/>
                    </label>

                    <!-- Start & duration -->
                    <label>Event starts at
                        <input name="event_start" required type="time"/>
                    </label>

                    <label>Event ends at
                        <input name="event_ends" required type="time"/>
                    </label>

                    <!-- Stage name -->
                    <label>Stage&nbsp;(optional)
                        <input name="stage" placeholder="Stage name (e.g. Main, Workshop)" type="text"/>
                    </label>

                    <button class="secondary" type="submit">Add Event</button>
                </form>
            </details>

            <!-- Accordion 2: Program Settings -->
            <details>
                <summary><h3>Program Settings</h3></summary>
                <form enctype="multipart/form-data" method="post">
                    <label>Time axis resolution
                        <select name="TIME_AXIS" required>
                            {% for t in time_axis %}
                            <option value="{{ t }}">{{ t }}</option>
                            {% endfor %}
                        </select>
                    </label>
                    <button class="secondary" type="submit">Save settings</button>
                </form>
            </details>
        </aside>

        <!-- ────────── 2. SCHEDULE (right‑two‑thirds) ────────── -->
        <section style="display:flex;flex-direction:column;align-items:center;">
            {% include "program_template.html" %}
        </section>
    </div>

</main>

</body>
</html>
